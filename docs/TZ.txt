ТЕХНИЧЕСКОЕ ЗАДАНИЕ
Система онлайн-заказа цветов "FlowerShop"

1. Общая информация
1.1. Назначение системы
Система предназначена для приема заказов на букеты/товары цветочного магазина через веб‑интерфейс и для обработки этих заказов администратором.

1.2. Цель
Упростить оформление заказов клиентами и обеспечить администратору удобный просмотр и обработку заказов и заявок на обратный звонок.

1.3. Состав системы
1) Веб‑клиент (frontend) — интерфейс каталога, корзины, оформления заказа, формы обратного звонка и админ‑панели.
2) Серверное приложение (backend) — REST API для каталога, заказов, админ‑панели и WebSocket‑уведомлений.
3) База данных (PostgreSQL) — хранение каталога, заказов, заявок и администраторов.

2. Роли пользователей
2.1. Клиент (неавторизованный пользователь)
Пользователь, который просматривает каталог, формирует корзину и оформляет заказ.

2.2. Администратор
Пользователь, который входит в админ‑панель по логину/паролю и обрабатывает заказы и заявки.

3. Функциональные требования
3.1. Клиентский функционал
F1. Просмотр каталога товаров (букетов) с отображением названия, цены, изображения и описания.
F2. Добавление товара в корзину (по кнопке “Add to cart”).
F3. Редактирование корзины: изменение количества, удаление позиции, отображение итоговой суммы.
F4. Оформление заказа:
 - ввод контактных данных (имя, телефон, email) и адреса доставки;
 - отправка заказа в систему;
 - подтверждение успешного оформления (экран “Заказ оформлен”).
F5. Отправка заявки на обратный звонок:
 - ввод имени и телефона;
 - отправка заявки в систему;
 - показ уведомления об успешной отправке.

3.2. Административный функционал
F6. Вход в админ‑панель по email/паролю.
F7. Просмотр “ожидающих” заказов (статусы NEW, IN_PROCESS).
F8. Просмотр “выполненных” заказов (статус COMPLETED).
F9. Изменение статуса заказа (например: NEW → IN_PROCESS → COMPLETED).
F10. Просмотр “ожидающих” заявок на звонок (completed=false) и отметка заявки как выполненной.
F11. Просмотр выполненных заявок на звонок (completed=true).
F12. Управление администраторами:
 - просмотр списка администраторов;
 - создание администратора;
 - удаление администратора.

3.3. Уведомления (опционально)
F13. После создания заказа сервер отправляет событие обновления товаров через WebSocket (топик /topic/products).

4. Данные и основные сущности
4.1. Product (товар)
Поля: id, name, price, description, image, stock, category (опционально).

4.2. Order (заказ)
Поля: id, customerName, customerEmail, customerPhone, deliveryAddress, status, totalPrice, createdAt, items.
Статусы: NEW, IN_PROCESS, DELIVERING, COMPLETED, CANCELLED.

4.3. OrderItem (позиция заказа)
Поля: id, product, quantity, price.

4.4. CallbackRequest (заявка на звонок)
Поля: id, name, phone, createdAt, completed.

4.5. User (администратор)
Поля: id, email, password, name, phone, role (ADMIN).

5. Интерфейсы (API) — кратко
5.1. Клиентские API
GET /api/products — список товаров.
GET /api/products/{id} — товар по id.
POST /api/orders — создание заказа (customerName, customerEmail, customerPhone, deliveryAddress, items[{productId, quantity}]).
POST /api/callback — создание заявки на звонок (name, phone).

5.2. Административные API
POST /api/admin/login — вход администратора.
GET /api/admin/orders/pending — ожидающие заказы.
GET /api/admin/orders/completed — выполненные заказы.
PUT /api/admin/orders/{id}/status — смена статуса заказа.
GET /api/admin/callbacks/pending — ожидающие заявки.
GET /api/admin/callbacks/completed — выполненные заявки.
PUT /api/admin/callbacks/{id}/complete — отметить заявку выполненной.
GET /api/admin/users — список администраторов.
POST /api/admin/users — создать администратора.
DELETE /api/admin/users/{id} — удалить администратора.

6. Нефункциональные требования и ограничения
N1. Система работает как учебный проект; регистрация клиентов и личный кабинет клиента не предусмотрены.
N2. Админ‑вход реализован через email/пароль; требования JWT/bcrypt в рамках данной реализации не применяются.
N3. Время отклика API желательно до 1 секунды для типовых операций в локальном окружении.
N4. Логи операций списания товара пишутся в файл приложения (flowershop.log) при запуске в Docker.

